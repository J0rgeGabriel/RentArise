<app-header></app-header>
<div class="cadastro-produto-bg">
  <div class="cadastro-produto-card">
    <h2>Cadastro de Produto</h2>
    <form [formGroup]="produtoForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Nome do Produto</label>
        <input type="text" id="name" formControlName="name" [ngClass]="{ 'is-invalid': submitted && f['name'].errors }" autocomplete="off" />

        <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
          <div *ngIf="f['name'].errors['required']">Nome é obrigatório</div>
        </div>
      </div>
      <div class="form-group">
        <label for="description">Descrição</label>
        <textarea id="description" rows="3" formControlName="description" [ngClass]="{ 'is-invalid': submitted && f['description'].errors }" autocomplete="off"></textarea>

        <div *ngIf="submitted && f['description'].errors" class="invalid-feedback">
          <div *ngIf="f['description'].errors['required']">Descrição é obrigatória</div>
        </div>
      </div>
      <div class="form-group">
        <label for="price">Preço (valor por dia)</label>
        <input type="number" id="price" formControlName="price" [ngClass]="{ 'is-invalid': submitted && f['price'].errors }" autocomplete="off" />
        <div *ngIf="submitted && f['price'].errors" class="invalid-feedback">
          <div *ngIf="f['price'].errors['required']">Preço é obrigatório</div>
          <div *ngIf="f['price'].errors['min']">Preço deve ser maior que zero</div>
        </div>
      </div>
      <div class="form-group">
        <label for="file">Imagem Principal</label>
        <input type="file" id="file" (change)="onFileChangePrincipal($event)" accept="image/*" />
      </div>
      <button type="submit" class="btn-cadastro-produto">Cadastrar Produto</button>
    </form>
  </div>
  <div class="cadastro-produto-preview">
    <h3>Pré-visualização</h3>
    <div class="product-card">
      <img [src]="imagemPreviewUrl || 'https://via.placeholder.com/270x180?text=Sem+Imagem'" alt="Imagem do Produto" class="product-image">
      <div class="product-details">
        <h3 class="product-name">{{ produtoForm.get('name')?.value || 'Nome do Produto' }}</h3>
        <p class="product-description">{{ produtoForm.get('description')?.value || 'Descrição do produto...' }}</p>
      </div>
    </div>
  </div>
</div>
<app-footer></app-footer>
